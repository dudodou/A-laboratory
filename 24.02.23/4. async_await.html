<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>async_await</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        table {
            width: 17%;
            background-color: black;
            background-image: "/images/stussy business card.jpg";
            opacity: 1;
            margin: 10px;
        }

        th{
            background-color: rgb(174, 216, 176);
            opacity: 1;
        }
        tr,
        td {
            background-color: rgba(202, 218, 230, 0.826);
        }
    </style>
</head>

<body>
    <div id="result"></div>

    <script>
        // fetch 불러오다 then 그 다음에
        // fetch("https://jsonplaceholder.typicode.com/users")
        // .then(response => response.json())
        // .then(users => console.log(users));
        // 콘솔에서 확인하기

        async function init() { // async : 비동기방식(한번에 가져와서 다같이 작동하는 방식)
            const response = await fetch("https://jsonplaceholder.typicode.com/users"); // await : 기다리다 // 기다렸다가 링크연결되면 다음 내용 실행
            const users = await response.json();
            console.log(users);
            display(users) // 필요 정보만 표시
        }

        function display(users) {
            const result = document.querySelector("#result");
            let string = "";
            users.forEach(user => {
                string += `<table>
                    <tr>
                        <th>이름</th> <td>${user.name}</td>
                        </tr>
                        <tr>
                        <th>아이디</th> <td>${user.username}</td>
                        </tr>
                        <tr>
                        <th>주소</th> <td>${user.company.name}</td>
                        </tr>
                        <tr>
                        <th>이메일</th> <td>${user.email}</td>
                        </tr>
                        <tr>
                        <th>전화번호</th> <td>${user.phone}</td>
                        </tr>
                        <tr>
                        <th>회사</th> <td>${user.company.name}</td>
                        </tr>
                        </table>
                        `;
            })
            result.innerHTML = string;
        }
        init() // 함수실행부분(호출) / 위에 init()에서 함수를 선언하고 여기서 함수를 호출
    </script>

</body>

</html>