<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> ê³µë¶€ í•  ì£¼ì œ _ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ </title>
    <style>
        span{
            background-color: olive;
        }
    </style>
</head>
<body>
    <div id="container">
        <h1> ê³µë¶€ í•  ì£¼ì œ </h1>
        <p> ê³µë¶€í•  ë‚´ìš©ì„ ê¸°ë¡í•´ ë³´ì„¸ìš”.</p>
        <form>
            <input type="text" id="item" autofocus="true">
            <button type="button" id="add" class="addBtn"> ì¶”ê°€í•˜ê¸° </button>
        </form>
        <!-- í‘œì‹œí•  ì˜ì—­ -->
        <div id="itemList"></div>
    </div>

    <script>
        let itemList = []; // í•˜ë‚˜í•˜ë‚˜ ë„£ì„ìˆ˜ìˆë„ë¡ ëŒ€ê´„í˜¸ë¡œ ì§€ì •
        let addBtn = document.querySelector("#add");
        let inputField = document.querySelector("#item");
        addBtn.addEventListener("click", addList); // í´ë¦­í•˜ë©´ addList í•¨ìˆ˜ ì‹¤í–‰
        // addBtn.onclick = addList; ë¼ê³  í•´ë„ ëœë‹¤. // onclick 1íšŒì„±(ë‹¨ë°œì„±) // addEventListener ì—¬ëŸ¬ê°€ì§€ ê°€ëŠ¥
        inputField.addEventListener("keypress", function (event){
            if(event.key === "Enter") {
                event.preventDefault(); // ìƒˆë¡œê³ ì¹¨ ë°©ì§€
                addList();
            }
        });

        function addList(){
            let item = document.querySelector("#item").value; // í…ìŠ¤íŠ¸ í•„ë“œ ë‚´ìš©
            console.log(item); // ì¶”ê°€ë‚´ìš© ì½˜ì†”ì°½ í™•ì¸
            if (item != null){
                // itemList.push(item); // itemList ë°°ì—´ì˜ ëì— item ë³€ìˆ˜ ê°’ ì¶”ê°€
                itemList.unshift(item); // unshift : ë°°ì—´ì˜ ë§¨ ì•ì— ì¶”ê°€(reverseì™€ ê°™ì€ ëŠë‚Œ)
                document.querySelector("#item").value = "";
                document.querySelector("#item").focus();
                        }
                        // localStorage.setItem('name', JSON.stringify(array));
                        localStorage.setItem("storageList", JSON.stringify(itemList));
            showList();
        }

        function showList(){
            let list = "<ul>"; // ëª©ë¡ ì‹œì‘í•˜ëŠ” <ul>íƒœê·¸ ì €ì¥
            for(let i=0; i<itemList.length; i++){ // ë°°ì—´ ìš”ì†Œë§ˆë‹¤ ë°˜ë³µ
                list += "<li>" + itemList[i] + "<span class='close' id="+i+"> X </span>" + "</li>";
                // ìš”ì†Œì™€ ì‚­ì œ ë²„íŠ¼ì„ <li> ~ </li>ë¡œ ë¬¶ìŒ
            }
            list += "</ul>" // list = list + "</ul>" ëª©ë¡ì„ ëë‚´ëŠ” ë¶€ë¶„

            document.querySelector('#itemList').innerHTML = list; // list ë‚´ìš© í‘œì‹œ

            let remove = document.querySelectorAll(".close"); // ì‚­ì œë²„íŠ¼
            for(let i=0; i<remove.length; i++){
                remove[i].addEventListener("click", removeList); // í•´ë‹¹ìš”ì†Œ í´ë¦­ ì‹œ remove ì‹¤í•»
            }
        }   

        function removeList(){
            console.log(this); // í´ë¦­í•œ id=ië²ˆì§¸ í™•ì¸
            let id = this.getAttribute("id"); // í´ë¦­ idê°’ ê°€ì ¸ì™€ idë³€ìˆ˜ì— ì €ì¥
            itemList.splice(id, 1); // itemList ë°°ì—´ì—ì„œ ì¸ë±ìŠ¤ ê°’ì´ idì¸ ìš”ì†Œ 1ê°œ ì‚­ì œ
            showList(); // ë³€ê²½ëœ ë¶€ë¶„ í™”ë©´ì— í‘œì‹œ
            localStorage.setItem("storageList", JSON.stringify(itemList));
        }

        // function removeList(){

        // }

        // ë¡œì»¬ìŠ¤í† ë¦¬ì§€(localStorage) í…ŒìŠ¤íŠ¸
        // localStorage.setItem(1, "ì²« ë²ˆì§¸ ê°’");
        // localStorage.getItem(1) // í‚¤ ì´ë¦„ìœ¼ë¡œ ê°€ì§€ê³  ì˜¨ë‹¤.
        // localStorage.clear();

        // ğŸ”´ ë°°ì—´ í˜•íƒœ ì €ì¥
        // let array = [1,2,3]
        // localStorage.setItem('name', JSON.stringify(array));
        // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ê°€ì§€ê³  ì˜¤ê¸°
        // let todo = localStorage.getItem('name');
        // JSON.parse(todo);

        // ì—¬ëŸ¬ ê°’ìœ¼ë¡œ ëœ ë¬¸ìì—´ì„ ê°€ì ¸ì™€ ë°°ì—´ í˜•íƒœë¡œ ë³€í™˜í•  ë•ŒëŠ”
        // ğŸ”´ JSON.parse() ë©”ì„œë“œë¥¼ ì‚¬ìš©
        // JSON(JavaScript Object Notation)ì€ ìë£Œë¥¼ ì£¼ê³ ë°›ëŠ” ë°©ì‹ì„ ê°€ë¦¬í‚¤ëŠ” ë§ë¡œ
        // "ì œì´ìŠ¨"ì´ë¼ê³  ì½ëŠ”ë‹¤.
        // ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒê³¼ ê°™ì€ ë°©ë²•ì„ ì‚¬ìš©
    </script>
</body>
</html>